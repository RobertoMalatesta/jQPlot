!function(a){function b(a){var b,c,d=a.data.plot,e=d.eventCanvas._elem.offset(),f={x:a.pageX-e.left,y:a.pageY-e.top},g={xaxis:null,yaxis:null,x2axis:null,y2axis:null,y3axis:null,y4axis:null,y5axis:null,y6axis:null,y7axis:null,y8axis:null,y9axis:null,yMidAxis:null},h=["xaxis","yaxis","x2axis","y2axis","y3axis","y4axis","y5axis","y6axis","y7axis","y8axis","y9axis","yMidAxis"],i=d.axes;for(b=11;b>0;b--)c=h[b-1],i[c].show&&(g[c]=i[c].series_p2u(f[c.charAt(0)]));return{offsets:e,gridPos:f,dataPos:g}}a.jqplot.EnhancedLegendRenderer=function(){a.jqplot.TableLegendRenderer.call(this)},a.jqplot.EnhancedLegendRenderer.prototype=new a.jqplot.TableLegendRenderer,a.jqplot.EnhancedLegendRenderer.prototype.constructor=a.jqplot.EnhancedLegendRenderer,a.jqplot.EnhancedLegendRenderer.prototype.init=function(b){this.numberRows=null,this.numberColumns=null,this.seriesToggle="normal",this.seriesToggleReplot=!1,this.disableIEFading=!0,a.extend(!0,this,b),this.seriesToggle&&a.jqplot.postDrawHooks.push(d)},a.jqplot.EnhancedLegendRenderer.prototype.draw=function(b,d){if(this.show){var e,f=this._series,g="position:absolute;";g+=this.background?"background:"+this.background+";":"",g+=this.border?"border:"+this.border+";":"",g+=this.fontSize?"font-size:"+this.fontSize+";":"",g+=this.fontFamily?"font-family:"+this.fontFamily+";":"",g+=this.textColor?"color:"+this.textColor+";":"",g+=null!=this.marginTop?"margin-top:"+this.marginTop+";":"",g+=null!=this.marginBottom?"margin-bottom:"+this.marginBottom+";":"",g+=null!=this.marginLeft?"margin-left:"+this.marginLeft+";":"",g+=null!=this.marginRight?"margin-right:"+this.marginRight+";":"",this._elem=a('<table class="jqplot-table-legend" style="'+g+'"></table>'),this.seriesToggle&&this._elem.css("z-index","3");var h,i,j=!1,k=!1;this.numberRows?(h=this.numberRows,i=this.numberColumns?this.numberColumns:Math.ceil(f.length/h)):this.numberColumns?(i=this.numberColumns,h=Math.ceil(f.length/this.numberColumns)):(h=f.length,i=1);var l,m,n,o,p,q,r,s,t,u=0;for(l=f.length-1;l>=0;l--)(1==i&&f[l]._stack||f[l].renderer.constructor==a.jqplot.BezierCurveRenderer)&&(k=!0);for(l=0;h>l;l++){for(n=a(document.createElement("tr")),n.addClass("jqplot-table-legend"),k?n.prependTo(this._elem):n.appendTo(this._elem),m=0;i>m;m++){if(u<f.length&&(f[u].show||f[u].showLabel)&&(e=f[u],q=this.labels[u]||e.label.toString())){var v=e.color;if(j=k?l==h-1?!1:!0:l>0?!0:!1,r=j?this.rowSpacing:"0",o=a(document.createElement("td")),o.addClass("jqplot-table-legend jqplot-table-legend-swatch"),o.css({textAlign:"center",paddingTop:r}),s=a(document.createElement("div")),s.addClass("jqplot-table-legend-swatch-outline"),t=a(document.createElement("div")),t.addClass("jqplot-table-legend-swatch"),t.css({backgroundColor:v,borderColor:v}),o.append(s.append(t)),p=a(document.createElement("td")),p.addClass("jqplot-table-legend jqplot-table-legend-label"),p.css("paddingTop",r),this.escapeHtml?p.text(q):p.html(q),k?(this.showLabels&&p.prependTo(n),this.showSwatches&&o.prependTo(n)):(this.showSwatches&&o.appendTo(n),this.showLabels&&p.appendTo(n)),this.seriesToggle){var w;("string"==typeof this.seriesToggle||"number"==typeof this.seriesToggle)&&(a.jqplot.use_excanvas&&this.disableIEFading||(w=this.seriesToggle)),this.showSwatches&&(o.bind("click",{series:e,speed:w,plot:d,replot:this.seriesToggleReplot},c),o.addClass("jqplot-seriesToggle")),this.showLabels&&(p.bind("click",{series:e,speed:w,plot:d,replot:this.seriesToggleReplot},c),p.addClass("jqplot-seriesToggle")),!e.show&&e.showLabel&&(o.addClass("jqplot-series-hidden"),p.addClass("jqplot-series-hidden"))}j=!0}u++}o=p=s=t=null}}return this._elem};var c=function(c){var d=b(c),e=c.data.plot,f=a.Event("jqplotLegendToggleSerie");f.pageX=c.pageX,f.pageY=c.pageY;var g=c.data,h=g.series,i=g.replot,j=g.plot,k=g.speed,l=h.index,m=!1;f.name=e.series[l].label,a(this).trigger(f,[d.gridPos,d.dataPos,e]),(h.canvas._elem.is(":hidden")||!h.show)&&(m=!0);var n=function(){if(i){var b={};if(a.isPlainObject(i)&&a.extend(!0,b,i),j.replot(b),m&&k){var c=j.series[l];c.shadowCanvas._elem&&c.shadowCanvas._elem.hide().fadeIn(k),c.canvas._elem.hide().fadeIn(k),c.canvas._elem.nextAll(".jqplot-point-label.jqplot-series-"+c.index).hide().fadeIn(k)}}else{var c=j.series[l];c.canvas._elem.is(":hidden")||!c.show?(("undefined"==typeof j.options.legend.showSwatches||j.options.legend.showSwatches===!0)&&j.legend._elem.find("td").eq(2*l).addClass("jqplot-series-hidden"),("undefined"==typeof j.options.legend.showLabels||j.options.legend.showLabels===!0)&&j.legend._elem.find("td").eq(2*l+1).addClass("jqplot-series-hidden")):(("undefined"==typeof j.options.legend.showSwatches||j.options.legend.showSwatches===!0)&&j.legend._elem.find("td").eq(2*l).removeClass("jqplot-series-hidden"),("undefined"==typeof j.options.legend.showLabels||j.options.legend.showLabels===!0)&&j.legend._elem.find("td").eq(2*l+1).removeClass("jqplot-series-hidden"))}};h.toggleDisplay(c,n)},d=function(){if(this.legend.renderer.constructor==a.jqplot.EnhancedLegendRenderer&&this.legend.seriesToggle){var b=this.legend._elem.detach();this.eventCanvas._elem.after(b)}}}(jQuery);