!function(a){function b(a){var b,c,d=a.data.plot,e=d.eventCanvas._elem.offset(),f={x:a.pageX-e.left,y:a.pageY-e.top},g={xaxis:null,yaxis:null,x2axis:null,y2axis:null,y3axis:null,y4axis:null,y5axis:null,y6axis:null,y7axis:null,y8axis:null,y9axis:null,yMidAxis:null},h=["xaxis","yaxis","x2axis","y2axis","y3axis","y4axis","y5axis","y6axis","y7axis","y8axis","y9axis","yMidAxis"],i=d.axes;for(b=11;b>0;b--)c=h[b-1],i[c].show&&(g[c]=i[c].series_p2u(f[c.charAt(0)]));return{offsets:e,gridPos:f,dataPos:g}}a.jqplot.EnhancedLegendRenderer=function(){a.jqplot.TableLegendRenderer.call(this)},a.jqplot.EnhancedLegendRenderer.prototype=new a.jqplot.TableLegendRenderer,a.jqplot.EnhancedLegendRenderer.prototype.constructor=a.jqplot.EnhancedLegendRenderer,a.jqplot.EnhancedLegendRenderer.prototype.init=function(b){this.numberRows=null,this.numberColumns=null,this.seriesToggle="normal",this.seriesToggleReplot=!1,this.disableIEFading=!0,this.legendTextColor="swatch",a.extend(!0,this,b),this.seriesToggle&&a.jqplot.postDrawHooks.push(d)},a.jqplot.EnhancedLegendRenderer.prototype.draw=function(b,d){var e=this;if(this.show){var f,g=this._series,h="position:absolute;";h+=this.background?"background:"+this.background+";":"",h+=this.border?"border:"+this.border+";":"",h+=this.fontSize?"font-size:"+this.fontSize+";":"",h+=this.fontFamily?"font-family:"+this.fontFamily+";":"",h+=this.textColor?"color:"+this.textColor+";":"",h+=null!=this.marginTop?"margin-top:"+this.marginTop+";":"",h+=null!=this.marginBottom?"margin-bottom:"+this.marginBottom+";":"",h+=null!=this.marginLeft?"margin-left:"+this.marginLeft+";":"",h+=null!=this.marginRight?"margin-right:"+this.marginRight+";":"",this._elem=a('<table class="jqplot-table-legend" style="'+h+'"></table>'),this.seriesToggle&&this._elem.css("z-index","3");var i,j,k=!1,l=!1;this.numberRows?(i=this.numberRows,j=this.numberColumns?this.numberColumns:Math.ceil(g.length/i)):this.numberColumns?(j=this.numberColumns,i=Math.ceil(g.length/this.numberColumns)):(i=g.length,j=1);var m,n,o,p,q,r,s,t,u,v=0;for(m=g.length-1;m>=0;m--)(1==j&&g[m]._stack||g[m].renderer.constructor==a.jqplot.BezierCurveRenderer)&&(l=!0);for(m=0;i>m;m++){for(o=a(document.createElement("tr")),o.addClass("jqplot-table-legend"),l?o.prependTo(this._elem):o.appendTo(this._elem),n=0;j>n;n++){if(v<g.length&&(g[v].show||g[v].showLabel)&&(f=g[v],r=this.labels[v]||f.label.toString())){var w=f.color;if(k=l?m==i-1?!1:!0:m>0?!0:!1,s=k?this.rowSpacing:"0",p=a(document.createElement("td")),p.addClass("jqplot-table-legend jqplot-table-legend-swatch"),p.css({textAlign:"center",paddingTop:s}),t=a(document.createElement("div")),t.addClass("jqplot-table-legend-swatch-outline"),u=a(document.createElement("div")),u.addClass("jqplot-table-legend-swatch"),u.css({backgroundColor:w,borderColor:w}),p.append(t.append(u)),q=a(document.createElement("td")),q.addClass("jqplot-table-legend jqplot-table-legend-label"),q.css({paddingTop:s,color:"swatch"===e.legendTextColor?w:"inherit"}),this.escapeHtml?q.text(r):q.html(r),l?(this.showLabels&&q.prependTo(o),this.showSwatches&&p.prependTo(o)):(this.showSwatches&&p.appendTo(o),this.showLabels&&q.appendTo(o)),this.seriesToggle){var x;("string"==typeof this.seriesToggle||"number"==typeof this.seriesToggle)&&(a.jqplot.use_excanvas&&this.disableIEFading||(x=this.seriesToggle)),this.showSwatches&&(p.bind("click",{series:f,speed:x,plot:d,replot:this.seriesToggleReplot},c),p.addClass("jqplot-seriesToggle")),this.showLabels&&(q.bind("click",{series:f,speed:x,plot:d,replot:this.seriesToggleReplot},c),q.addClass("jqplot-seriesToggle")),!f.show&&f.showLabel&&(p.addClass("jqplot-series-hidden"),q.addClass("jqplot-series-hidden"))}k=!0}v++}p=q=t=u=null}}return this._elem};var c=function(c){var d=b(c),e=c.data.plot,f=a.Event("jqplotLegendToggleSerie");f.pageX=c.pageX,f.pageY=c.pageY;var g=c.data,h=g.series,i=g.replot,j=g.plot,k=g.speed,l=h.index,m=!1;f.name=e.series[l].label,a(this).trigger(f,[d.gridPos,d.dataPos,e]),(h.canvas._elem.is(":hidden")||!h.show)&&(m=!0);var n=function(){if(i){var b={};if(a.isPlainObject(i)&&a.extend(!0,b,i),j.replot(b),m&&k){var c=j.series[l];c.shadowCanvas._elem&&c.shadowCanvas._elem.hide().fadeIn(k),c.canvas._elem.hide().fadeIn(k),c.canvas._elem.nextAll(".jqplot-point-label.jqplot-series-"+c.index).hide().fadeIn(k)}}else{var c=j.series[l];c.canvas._elem.is(":hidden")||!c.show?(("undefined"==typeof j.options.legend.showSwatches||j.options.legend.showSwatches===!0)&&j.legend._elem.find("td").eq(2*l).addClass("jqplot-series-hidden"),("undefined"==typeof j.options.legend.showLabels||j.options.legend.showLabels===!0)&&j.legend._elem.find("td").eq(2*l+1).addClass("jqplot-series-hidden")):(("undefined"==typeof j.options.legend.showSwatches||j.options.legend.showSwatches===!0)&&j.legend._elem.find("td").eq(2*l).removeClass("jqplot-series-hidden"),("undefined"==typeof j.options.legend.showLabels||j.options.legend.showLabels===!0)&&j.legend._elem.find("td").eq(2*l+1).removeClass("jqplot-series-hidden"))}};h.toggleDisplay(c,n)},d=function(){if(this.legend.renderer.constructor==a.jqplot.EnhancedLegendRenderer&&this.legend.seriesToggle){var b=this.legend._elem.detach();this.eventCanvas._elem.after(b)}}}(jQuery);